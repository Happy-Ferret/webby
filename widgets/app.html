<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.7/css/bootstrap-material-design.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-material-design/0.5.7/css/ripples.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/localforage/1.3.1/localforage.min.js"></script>
  <script src="../js/default_verbs.js"></script>
</head>
<body>
<div id="tip" class="alert alert-warning hidden"></div>
<button id="reset" type="button" class="btn btn-warning">Reset to default Verbs</button>
<h2>Currently Support Verbs</h2>
<section id="configs">
</section>
<script>
  var stoerKey = 'verbstore';
  var configs = document.getElementById('configs');
  var reset = document.getElementById('reset');
  var tip = document.getElementById('tip');

  localforage.getItem(stoerKey, function(err, value) {
    if (err) {
      console.error(err);
    } else {
      verbAddons = JSON.parse(value);
      if (verbAddons) {
        verbAddons.forEach(function(verbAddon) {
          var header = document.createElement('h3');
          header.textContent = verbAddon.actionVerb;
          var ul = document.createElement('ul');
          configs.appendChild(header);
          configs.appendChild(ul);

          verbAddon.providers.forEach(function(provider) {
            var li = document.createElement('li');
            li.textContent = '| ';
            for (var prop in provider) {
              if(provider.hasOwnProperty(prop)) {
                li.textContent += prop + ': ' + provider[prop] + ' | ';
              }
            }
            ul.appendChild(li);
          });
        });
      }
    }
  });

  reset.addEventListener('click', function() {
    localforage.setItem(stoerKey,
      JSON.stringify(defaultVerbStore)).then(function() {
        if (tip.classList.contains('hidden')) {
          tip.classList.remove('hidden');
        }
        tip.textContent = 'please reload the page';
      });
  });
</script>
</body>
</html>
